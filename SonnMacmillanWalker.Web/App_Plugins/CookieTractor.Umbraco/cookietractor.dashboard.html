<div ng-controller="CookieTractor.Umbraco.DashboardController as vm" class="cookietractor">

    <div style="position: absolute;top: 10px;right: 15px;">
        <svg style="width:175px;float:right;margin-bottom:20px;" width="280px" height="41px" viewBox="0 0 280 41" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <title>cookietractor_logo</title>
            <g id="cookietractor_logo" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <g id="cookietractor" transform="translate(0.000000, 0.000000)" fill-rule="nonzero">
                    <path d="M125.028373,19.0266935 C118.939802,19.0266935 114.041674,23.9921214 114.041674,30.0136699 C114.041674,36.0714993 118.970267,40.9999077 125.028373,40.9999077 C131.108082,40.9999077 136.015719,36.0457426 136.015719,30.0136699 C136.015719,23.9601793 131.09008,19.0266935 125.028373,19.0266935 Z M125.028373,35.8791082 C121.738336,35.8791082 119.162842,33.1786155 119.162842,30.0139468 C119.162842,26.7793932 121.793912,24.147493 125.028373,24.147493 C128.262927,24.147493 130.894365,26.7793932 130.894365,30.0139468 C130.894365,33.1800003 128.316471,35.8791082 125.028373,35.8791082 Z M156.144599,24.0547132 C151.450679,24.0547132 147.67191,27.882319 147.67191,32.5276797 C147.67191,37.1993511 151.472651,41 156.144599,41 C160.838243,41 164.617658,37.1743328 164.617658,32.5276797 C164.617658,27.8574854 160.818025,24.0547132 156.144599,24.0547132 Z M156.144599,36.4642211 C153.936625,36.4642211 152.207966,34.6516451 152.207966,32.5276797 C152.207966,30.3568167 153.973829,28.5904921 156.144599,28.5904921 C158.31537,28.5904921 160.081602,30.3568167 160.081602,32.5276797 C160.081602,34.652199 158.351651,36.4642211 156.144599,36.4642211 Z M156.144599,22.0598087 C158.240315,22.0598087 160.242882,22.6875726 161.928982,23.807208 L161.928982,17.8357884 C161.928982,17.1675891 161.486224,16.5803529 160.843782,16.3965473 C154.722899,14.6453629 148.97332,13.6971625 146.001227,13.2780377 L144.652365,1.83399382 C144.529121,0.788120671 143.642589,0 142.589515,0 L126.142654,0 C125.100197,0 124.219204,0.772795846 124.083219,1.80629835 L122.568739,13.3217966 C119.737893,13.7334435 117.077281,14.8576025 114.767572,16.6334359 C113.893595,17.3053279 113.729915,18.5585478 114.401807,19.4324321 C114.948331,20.1433747 116.060119,20.5312959 116.678282,20.0877991 C118.970082,18.1612101 121.908386,17.0318813 125.028465,17.0318813 C132.530244,17.0318813 139.313233,23.5715196 137.726006,32.7509975 L145.679867,32.7509975 C145.555053,26.8422619 150.344246,22.0598087 156.144599,22.0598087 Z M137.991975,19.2297936 C135.185686,15.8571319 131.164396,13.6908848 126.770141,13.2350174 L127.96437,4.15432004 L140.742781,4.15432004 L142.519815,19.2297936 L137.991975,19.2297936 Z" id="icon" fill="#DB339B"></path>
                    <path d="M11.808,38.0588091 C17.7790909,38.0588091 22.4419091,34.2681727 22.8444545,28.3977182 L17.8126364,28.3977182 C17.2759091,31.6180818 15.0283636,33.4630818 11.8415455,33.4630818 C7.98381818,33.4630818 5.13245455,30.5781727 5.13245455,25.9153545 C5.13245455,21.2860818 7.98381818,18.3676273 11.8415455,18.3676273 C14.9277273,18.3676273 17.0746364,20.1455364 17.6449091,23.4329909 L22.8109091,23.4329909 C22.4083636,17.6296273 17.8126364,13.7719 11.808,13.7719 C4.96472727,13.7719 0,18.8037182 0,25.9153545 C0,33.0269909 4.96472727,38.0588091 11.808,38.0588091 Z M33.8138182,38.0588091 C38.7785455,38.0588091 42.3008182,34.5700818 42.3008182,29.5382636 C42.3008182,24.5064455 38.7785455,21.0177182 33.8138182,21.0177182 C28.8490909,21.0177182 25.3268182,24.5064455 25.3268182,29.5382636 C25.3268182,34.5700818 28.8490909,38.0588091 33.8138182,38.0588091 Z M33.8138182,33.8656273 C31.6333636,33.8656273 30.0902727,32.2219 30.0902727,29.5382636 C30.0902727,26.8546273 31.6333636,25.2444455 33.8138182,25.2444455 C35.9942727,25.2444455 37.5373636,26.8546273 37.5373636,29.5382636 C37.5373636,32.2219 35.9942727,33.8656273 33.8138182,33.8656273 Z M53.2701818,38.0588091 C58.2349091,38.0588091 61.7571818,34.5700818 61.7571818,29.5382636 C61.7571818,24.5064455 58.2349091,21.0177182 53.2701818,21.0177182 C48.3054545,21.0177182 44.7831818,24.5064455 44.7831818,29.5382636 C44.7831818,34.5700818 48.3054545,38.0588091 53.2701818,38.0588091 Z M53.2701818,33.8656273 C51.0897273,33.8656273 49.5466364,32.2219 49.5466364,29.5382636 C49.5466364,26.8546273 51.0897273,25.2444455 53.2701818,25.2444455 C55.4506364,25.2444455 56.9937273,26.8546273 56.9937273,29.5382636 C56.9937273,32.2219 55.4506364,33.8656273 53.2701818,33.8656273 Z M69.4353636,37.6562636 L69.4353636,30.8465364 L69.536,30.8465364 L75.071,37.6562636 L80.8408182,37.6562636 L73.8298182,29.1021727 L80.606,21.4202636 L74.9368182,21.4202636 L69.5695455,27.5926273 L69.4353636,27.5926273 L69.4353636,14.1744455 L64.739,14.1744455 L64.739,37.6562636 L69.4353636,37.6562636 Z M85.4365455,19.2062636 C87.0802727,19.2062636 88.3885455,17.9986273 88.3885455,16.3213545 C88.3885455,14.6440818 87.0802727,13.4364455 85.4365455,13.4364455 C83.7928182,13.4364455 82.4845455,14.6440818 82.4845455,16.3213545 C82.4845455,17.9986273 83.7928182,19.2062636 85.4365455,19.2062636 Z M87.7847273,37.6562636 L87.7847273,21.4202636 L83.0883636,21.4202636 L83.0883636,37.6562636 L87.7847273,37.6562636 Z M99.2243396,38.0588091 C103.182703,38.0588091 106.134703,35.9789909 106.97334,32.3560818 L102.511794,32.3560818 C102.008612,33.4630818 100.800976,34.1339909 99.2578851,34.1339909 C97.1780669,34.1339909 95.7020669,32.9934455 95.3330669,30.6788091 L107.040431,30.6788091 C107.141067,30.0749909 107.174612,29.5382636 107.174612,29.0686273 C107.174612,24.1039 103.820067,21.0177182 99.1907942,21.0177182 C94.2596123,21.0177182 90.7373396,24.5399909 90.7373396,29.6389 C90.7373396,34.6371727 94.1254305,38.0588091 99.2243396,38.0588091 Z M102.478249,27.6932636 L95.5007942,27.6932636 C96.003976,25.8147182 97.3793396,24.8754455 99.1907942,24.8754455 C100.868067,24.8754455 102.142794,25.7140818 102.478249,27.6932636 Z" id="Cookie" fill="#001E76"></path>
                    <path d="M180.381976,37.6562636 L180.381976,18.8037182 L186.822703,18.8037182 L186.822703,14.1744455 L169.010067,14.1744455 L169.010067,18.8037182 L175.417249,18.8037182 L175.417249,37.6562636 L180.381976,37.6562636 Z M192.761473,37.6562636 L192.761473,30.3769 C192.761473,27.1900818 194.203928,25.6805364 197.155928,25.6805364 C197.592019,25.6805364 198.061655,25.7140818 198.564837,25.7811727 L198.564837,21.3531727 C198.162292,21.1854455 197.625564,21.1183545 197.088837,21.1183545 C195.143201,21.1183545 193.465928,22.1247182 192.694382,23.8690818 L192.560201,23.8690818 L192.325382,21.4202636 L188.06511,21.4202636 L188.06511,37.6562636 L192.761473,37.6562636 Z M205.508746,38.0588091 C207.789837,38.0588091 209.634837,37.1195364 210.57411,35.6435364 L210.674746,35.6435364 L210.876019,37.6562636 L215.102746,37.6562636 L215.102746,27.7603545 C215.102746,23.3659 212.687473,21.0177182 208.091746,21.0177182 C203.529564,21.0177182 200.778837,23.3323545 200.61111,27.0223545 L205.240382,27.0223545 C205.341019,25.6469909 206.246746,24.9089909 207.924019,24.9089909 C209.701928,24.9089909 210.57411,25.7140818 210.57411,27.5255364 L210.57411,27.5926273 L206.079019,28.2635364 C201.986473,28.8673545 200.074382,30.6452636 200.074382,33.3289 C200.074382,36.1131727 202.254837,38.0588091 205.508746,38.0588091 Z M206.917655,34.4694455 C205.575837,34.4694455 204.837837,33.9327182 204.837837,32.9599 C204.837837,31.9870818 205.508746,31.3497182 207.353746,31.1149 L210.57411,30.6452636 L210.57411,30.9136273 C210.57411,33.0605364 209.09811,34.4694455 206.917655,34.4694455 Z M226.341086,38.0588091 C230.802631,38.0588091 233.989449,35.4087182 234.358449,31.0478091 L229.561449,31.0478091 C229.326631,32.7921727 227.984813,33.8656273 226.30754,33.8656273 C224.227722,33.8656273 222.684631,32.1883545 222.684631,29.5382636 C222.684631,26.8881727 224.261268,25.2444455 226.341086,25.2444455 C228.051904,25.2444455 229.225995,26.2843545 229.494358,28.0287182 L234.291358,28.0287182 C233.955904,23.6342636 230.869722,21.0177182 226.408177,21.0177182 C221.376358,21.0177182 217.921177,24.4729 217.921177,29.5382636 C217.921177,34.6036273 221.342813,38.0588091 226.341086,38.0588091 Z M244.489177,38.0588091 C245.562631,38.0588091 246.401268,37.9246273 247.072177,37.7569 L247.072177,33.7985364 C246.636086,33.8656273 246.099358,33.8991727 245.629722,33.8991727 C243.616995,33.8991727 242.91254,33.2618091 242.91254,31.2826273 L242.91254,25.5463545 L246.97154,25.5463545 L246.97154,21.4202636 L242.91254,21.4202636 L242.91254,17.5625364 L238.216177,17.5625364 L238.216177,21.4202636 L235.700268,21.4202636 L235.700268,25.5463545 L238.216177,25.5463545 L238.216177,31.6516273 C238.216177,36.1467182 240.262449,38.0588091 244.489177,38.0588091 Z M257.404177,38.0588091 C262.368904,38.0588091 265.891177,34.5700818 265.891177,29.5382636 C265.891177,24.5064455 262.368904,21.0177182 257.404177,21.0177182 C252.439449,21.0177182 248.917177,24.5064455 248.917177,29.5382636 C248.917177,34.5700818 252.439449,38.0588091 257.404177,38.0588091 Z M257.404177,33.8656273 C255.223722,33.8656273 253.680631,32.2219 253.680631,29.5382636 C253.680631,26.8546273 255.223722,25.2444455 257.404177,25.2444455 C259.584631,25.2444455 261.127722,26.8546273 261.127722,29.5382636 C261.127722,32.2219 259.584631,33.8656273 257.404177,33.8656273 Z M273.540153,37.6562636 L273.540153,30.3769 C273.540153,27.1900818 274.982607,25.6805364 277.934607,25.6805364 C278.370698,25.6805364 278.840334,25.7140818 279.343516,25.7811727 L279.343516,21.3531727 C278.940971,21.1854455 278.404244,21.1183545 277.867516,21.1183545 C275.92188,21.1183545 274.244607,22.1247182 273.473062,23.8690818 L273.33888,23.8690818 L273.104062,21.4202636 L268.843789,21.4202636 L268.843789,37.6562636 L273.540153,37.6562636 Z" id="Tractor" fill="#001E76"></path>
                </g>
            </g>
        </svg>
        <div style="clear:both;"></div>
    </div>

    <umb-load-indicator ng-if="vm.loading">
    </umb-load-indicator>
    
    <div ng-if="!vm.loading && vm.state=='MissingConfiguration'">
        <umb-box>
            <umb-box-header title="Configuration needed"></umb-box-header>
            <umb-box-content>
                <p>You need to configuration the API-key for CookieTractor in your application configuration.</p>
            </umb-box-content>
        </umb-box>
    </div>

    <div class="ct-boxes" ng-if="!vm.loading && vm.state=='Overview'">

        <umb-box>
            <umb-box-header title="Consent statistics"></umb-box-header>
            <umb-box-content>
                <p>Total consents collected: <strong>{{vm.data.consentSummary.totalUsers}}</strong></p>
                <div ng-if="vm.data.consentSummary.totalUsers > 0">
                    <div style="width:250px; height:250px">
                        <!-- Render chart here-->
                        <canvas id="base2"
                                width="100"
                                height="100"
                                class="chart chart-doughnut"
                                chart-doughnut=""
                                chart-dataset-override="vm.chart.datasetOverride"
                                chart-data="vm.chart.data"
                                chart-labels="vm.chart.labels"
                                chart-colors="vm.chart.colors"
                                chart-options="vm.chart.options">
                        </canvas>
                    </div>
                    <br/>
                    <div>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Concent choice</th>
                                    <th>Consents collected</th>
                                    <th>Distribution</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Accept all</td>
                                    <td>{{vm.data.consentSummary.allCount}}</td>
                                    <td>{{vm.data.consentSummary.allPercent}}%</td>
                                </tr>
                                <tr>
                                    <td>Only necessary</td>
                                    <td>{{vm.data.consentSummary.necessaryCount}}</td>
                                    <td>{{vm.data.consentSummary.necessaryPercent}}%</td>
                                </tr>
                                <tr>
                                    <td>Statistics only</td>
                                    <td>{{vm.data.consentSummary.statisticalCount}}</td>
                                    <td>{{vm.data.consentSummary.statisticalPercent}}%</td>
                                </tr>
                                <tr>
                                    <td>Marketing only</td>
                                    <td>{{vm.data.consentSummary.marketingCount}}</td>
                                    <td>{{vm.data.consentSummary.marketingPercent}}%</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
        
            </div>


            </umb-box-content>
        </umb-box>
        
        <umb-box>
            <umb-box-header title="Information"></umb-box-header>
            <umb-box-content>

                <div class="ct-alert" ng-if="vm.data && vm.data.cookiesMissingDescriptions > 0">
                    <p><span>{{vm.data.cookiesMissingDescriptions}}</span> Missing cookie descriptions</p>
                </div>

                <div class="ct-alert" ng-if="vm.data.currentlyCrawling">
                    <p>We are currently crawling your website for cookies</p>
                </div>

                <table class="table">
                    <tr>
                        <th>Website:</th>
                        <td>{{vm.data.websiteName}}</td>
                    </tr>
                    <tr>
                        <th>Total Cookies:</th>
                        <td>{{vm.data.cookiesTotal}}</td>
                    </tr>
                    <tr>
                        <th>Latest crawl:</th>
                        <td>{{vm.data.latestCrawl | date: 'short'}}</td>
                    </tr>
                    <tr>
                        <th>Upcoming crawl:</th>
                        <td>{{vm.data.upcomingCrawl | date: 'short'}}</td>
                    </tr>
                </table>

                <a ng-href="https://app.cookietractor.com/Tool#!/website/{{vm.data.websiteKey}}/overview" target="_blank" class="btn btn-action">Open Cookie Tractor</a>

            </umb-box-content>
        </umb-box>               
</div>